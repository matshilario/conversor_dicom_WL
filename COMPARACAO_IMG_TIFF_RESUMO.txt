git remote add origin https://github.com/matshilario/conversor-dicom-unificado.git================================================================================
COMPARA√á√ÉO: DICOM DE .IMG vs DICOM DE TIFF - RESUMO EXECUTIVO
================================================================================

Data: 01/12/2025

================================================================================
ARQUIVOS COMPARADOS
================================================================================

ARQUIVO 1: WL_fixed.dcm
  Origem: Elekta iView .img ‚Üí Nosso conversor (fix_dicom_header.py)
  Tamanho: 2049.4 KB
  Fonte de dados: ARQUIVO REAL do acelerador linear

ARQUIVO 2: gantry_0.dcm
  Origem: TIFF ‚Üí pylinac.image.tiff_to_dicom()
  Tamanho: 2049.2 KB
  Fonte de dados: IMAGEM CONVERTIDA com par√¢metros sint√©ticos


================================================================================
SEMELHAN√áAS (TAGS ID√äNTICAS)
================================================================================

‚úì Modalidade: Ambos s√£o RTIMAGE (RT Image Storage)
‚úì Dimens√µes da imagem: 1024 x 1024 pixels
‚úì Bits Allocated: 16 bits
‚úì Photometric Interpretation: MONOCHROME2
‚úì SOP Class UID: 1.2.840.10008.5.1.4.1.1.481.1 (RT Image Storage)
‚úì Transfer Syntax UID: 1.2.840.10008.1.2.1 (Explicit VR Little Endian)
‚úì File Meta Information Header: Ambos possuem header completo
‚úì Compatibilidade: Ambos s√£o 100% compat√≠veis com pylinac


================================================================================
DIFEREN√áAS PRINCIPAIS
================================================================================

CATEGORIA 1: INFORMA√á√ïES DO PACIENTE
-------------------------------------
                          DE .IMG                    DE TIFF
                          -------                    -------
Patient Name:             WINSTON-LUTZ^WL^^^         Pylinac array
Patient ID:               WL2025                     123456789
Patient Birth Date:       (n√£o informado)            20000101

RAZ√ÉO: .img cont√©m dados reais do teste Winston-Lutz
       TIFF usa dados sint√©ticos padr√£o do pylinac


CATEGORIA 2: INFORMA√á√ïES DO EQUIPAMENTO
----------------------------------------
                          DE .IMG                    DE TIFF
                          -------                    -------
Manufacturer:             ELEKTA                     Pylinac
Model Name:               Elekta iView EPID          (n√£o informado)
Station Name:             Versa01                    (n√£o informado)
RT Image Label:           iViewIMRTSegment           Pylinac image

RAZ√ÉO: .img preserva informa√ß√µes reais do equipamento Elekta
       TIFF usa identificador gen√©rico do pylinac


CATEGORIA 3: PAR√ÇMETROS GEOM√âTRICOS
------------------------------------
                          DE .IMG                    DE TIFF
                          -------                    -------
RT Image SID:             1600.00 mm                 1000.0 mm
Radiation Machine SAD:    1000.00 mm                 1000.0 mm
Pixel Spacing:            0.402 x 0.402 mm           0.251 x 0.251 mm
Gantry Angle:             0.00¬∞                      0.00¬∞

RAZ√ÉO: .img tem valores reais do equipamento (SID = 1600mm)
       TIFF usa par√¢metros configurados manualmente (SID = 1000mm)

‚ö†Ô∏è IMPORTANTE: Diferen√ßa no SID e Pixel Spacing pode afetar c√°lculos!


CATEGORIA 4: TAGS ESPEC√çFICAS DE RT
------------------------------------
                               DE .IMG      DE TIFF
                               -------      -------
Beam Limiting Device Angle:    ‚úó            ‚úì (0.00¬∞)
Patient Support Angle:         ‚úó            ‚úì (0.00¬∞)
Primary Dosimeter Unit:        ‚úó            ‚úì (MU)
Series Description:            ‚úì (WL:)      ‚úó
Radiation Machine SSD:         ‚úì (0.00)     ‚úó

RAZ√ÉO: pylinac adiciona tags padr√£o de RT
       .img preserva apenas tags originais do Elekta


CATEGORIA 5: IDENTIFICADORES √öNICOS
------------------------------------
                          DE .IMG                    DE TIFF
                          -------                    -------
Study Instance UID:       1.3.46.423632.304004...    1.2.826.0.1.3680043...
Series Instance UID:      1.3.46.423632.304004...    1.2.826.0.1.3680043...
SOP Instance UID:         1.3.46.423632.304004...    1.2.826.0.1.3680043...

RAZ√ÉO: UIDs s√£o sempre √∫nicos e gerados no momento da cria√ß√£o
       .img usa UIDs do Elekta (1.3.46.423632...)
       TIFF usa UIDs do pydicom (1.2.826...)


================================================================================
IMPACTO DAS DIFEREN√áAS NA AN√ÅLISE WINSTON-LUTZ
================================================================================

PAR√ÇMETROS CR√çTICOS PARA WL:
-----------------------------
‚úì Gantry Angle: Presente em ambos (0.00¬∞)
‚úì Image Dimensions: Id√™nticos (1024x1024)
‚úì Modality: Id√™nticos (RTIMAGE)
‚úì SOP Class: Id√™nticos

‚ö†Ô∏è ATEN√á√ÉO - DIFEREN√áA CR√çTICA:
--------------------------------
Pixel Spacing:
  - .img: 0.402 mm (real do equipamento)
  - TIFF: 0.251 mm (calculado de DPI=400)

RT Image SID:
  - .img: 1600 mm (real do equipamento)
  - TIFF: 1000 mm (par√¢metro configurado)

IMPACTO:
  Essas diferen√ßas afetam c√°lculos de dist√¢ncia f√≠sica!

  Pixel Spacing = 25.4 mm / DPI
  Para DPI=400: 25.4/400 = 0.0635 mm ‚â† 0.251 mm ‚ö†Ô∏è

  NOTA: O valor 0.251 parece estar relacionado √† magnifica√ß√£o
        considerando SID/SAD (1000/1000 = 1.0)


================================================================================
RECOMENDA√á√ïES DE USO
================================================================================

USE ARQUIVOS DE .IMG QUANDO:
----------------------------
‚úì Voc√™ tem arquivos exportados do acelerador Elekta
‚úì Precisa de dados REAIS do equipamento
‚úì Quer preservar informa√ß√µes originais (SID, Pixel Spacing corretos)
‚úì An√°lise de produ√ß√£o/cl√≠nica
‚úì Documenta√ß√£o oficial
‚úì Compara√ß√£o com dados hist√≥ricos do equipamento

USE CONVERS√ÉO TIFF QUANDO:
--------------------------
‚úì N√£o tem acesso aos arquivos .img originais
‚úì Precisa converter imagens de outras fontes
‚úì Testes e simula√ß√µes
‚úì Desenvolvimento de software
‚úì Prototipagem r√°pida
‚úì Demonstra√ß√µes educacionais

IMPORTANTE - CALIBRA√á√ÉO:
------------------------
Se usar arquivos TIFF convertidos, SEMPRE:
  1. Configure o SID correto do seu equipamento
  2. Configure o DPI correto da imagem
  3. Verifique o Pixel Spacing resultante
  4. Compare com especifica√ß√µes do fabricante


================================================================================
COMPATIBILIDADE COM PYLINAC
================================================================================

ARQUIVO DE .IMG:
  ‚úÖ 100% compat√≠vel com pylinac.WinstonLutz()
  ‚úÖ Todas as tags essenciais presentes
  ‚úÖ File Meta Information Header completo
  ‚úÖ Pode ser lido sem force=True
  ‚úÖ Valores reais do equipamento

ARQUIVO DE TIFF:
  ‚úÖ 100% compat√≠vel com pylinac.WinstonLutz()
  ‚úÖ Todas as tags essenciais presentes
  ‚úÖ File Meta Information Header completo
  ‚úÖ Pode ser lido sem force=True
  ‚úÖ Tags RT adicionais (BeamLimitingDeviceAngle, etc.)


================================================================================
CONCLUS√ÉO FINAL
================================================================================

AMBOS OS M√âTODOS DE CONVERS√ÉO FUNCIONAM!

üìä PARA AN√ÅLISE CL√çNICA:
   ‚Üí Prefira arquivos de .img (dados reais)

üî¨ PARA DESENVOLVIMENTO/TESTE:
   ‚Üí Use convers√£o TIFF (mais flex√≠vel)

‚ö†Ô∏è ATEN√á√ÉO √Ä CALIBRA√á√ÉO:
   ‚Üí Verifique SID e Pixel Spacing!
   ‚Üí Valores incorretos afetam c√°lculos de dist√¢ncia

‚úÖ QUALIDADE DOS CONVERSORES:
   ‚Üí Conversor .img: Preserva dados originais
   ‚Üí Conversor TIFF: Fun√ß√£o oficial do pylinac
   ‚Üí Ambos geram headers DICOM completos e v√°lidos


================================================================================
ARQUIVOS GERADOS NESTA AN√ÅLISE
================================================================================

‚úÖ comparar_img_vs_tiff.py - Script de compara√ß√£o
‚úÖ comparacao_img_vs_tiff.txt - Relat√≥rio detalhado
‚úÖ COMPARACAO_IMG_TIFF_RESUMO.txt - Este arquivo


================================================================================
